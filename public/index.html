<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>OSINT Tracking Lab - Generador</title>
  <style>
    body { font-family: sans-serif; max-width: 600px; margin: 50px auto; padding: 20px; }
    input, button { padding: 12px; margin: 10px 0; width: 100%; font-size: 16px; }
    button { background: #007bff; color: white; border: none; cursor: pointer; }
    .enlace { background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0; }
    .copiar { background: #28a745; }
  </style>
</head>
<body>
  <h1>üïµÔ∏è OSINT Tracking Lab</h1>
  
  <!-- üÜï BOT√ìN AL PANEL -->
  <div style="margin: 20px 0;">
    <a href="/panel.html" style="background:#28a745; color:white; padding:12px 24px; text-decoration:none; border-radius:6px; font-weight:bold;">üìä Ver Panel de Clics</a>
  </div>
  
  <p>Ingresa una URL real y genera un enlace de tracking para el taller.</p>
  
  <input id="url" placeholder="https://maps.google.com/..." type="url">
  <button onclick="crearEnlace()">Generar enlace corto</button>
  
  <div id="resultado"></div>
  
  <script>
    async function crearEnlace() {
      const url = document.getElementById('url').value;
      if (!url) return alert('Ingresa una URL');
      
      try {
        const res = await fetch('/api/nuevo', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({destino: url})
        });
        const data = await res.json();
        
        document.getElementById('resultado').innerHTML = `
          <div class="enlace">
            <h3>‚úÖ Enlace generado:</h3>
            <input readonly value="${data.corto}" onclick="this.select()">
            <br><small>ID: ${data.id} | Destino: ${data.destino}</small>
            <br><button class="copiar" onclick="copiarEnlace('${data.corto}')">Copiar enlace</button>
          </div>
        `;
      } catch(e) {
        alert('Error: ' + e.message);
      }
    }
    
    function copiarEnlace(url) {
      navigator.clipboard.writeText(url);
      alert('¬°Enlace copiado al portapapeles!');
    }
  </script>
</body>
</html>
